{"ast":null,"code":"var _jsxFileName = \"/Users/uthithmenonravitharan/Documents/GitHub/Grabbit/react-grabbit/src/Components/CartTile.js\",\n  _s = $RefreshSig$();\nimport \"../Styles/CartTile.css\";\nimport bike from \"../Images/bike.jpg\";\nimport IconButton from '@mui/material/IconButton';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport { EditWatchlist, EditWatchBadge, Watchlist } from \"../App\";\nimport { useContext, useState } from \"react\";\nimport { Button } from \"@mui/material\";\nimport { useNavigate } from \"react-router-dom\";\nimport ContactSeller from \"../Modals/ContactSeller\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction CartTile({\n  user,\n  data: item\n}) {\n  _s();\n  const navigate = useNavigate();\n  const set = useContext(EditWatchlist);\n  const badge = useContext(EditWatchBadge);\n  const watch = useContext(Watchlist);\n  const [open, setOpen] = useState(false);\n  const imageUrl = item.imageUrl ? `http://localhost:5003${item.imageUrl}` : \"https://via.placeholder.com/150\";\n  function handleRemove() {\n    for (let i = 0; i < watch.length; i++) {\n      if (item._id === watch[i]._id) {\n        watch.splice(i, 1);\n        break;\n      }\n    }\n    requestRemoveItemWatchlist(item);\n    set(watch);\n    badge(watch.length);\n\n    //This fixes an issue with the page not updating specifically for a single item when pulling from the DB\n    //DO NOT CHANGE\n    if (watch.length < 1) {\n      navigate(\"/cart\");\n    }\n  }\n  function handleDetails() {\n    navigate(\"/details\", {\n      state: {\n        data: item\n      }\n    });\n  }\n  function handlePurchase() {\n    console.log(\"Send to Stripe API\");\n    console.log(\"Item name:\", item.title);\n    console.log(\"Item cost:\", item.price);\n  }\n  async function requestRemoveItemWatchlist(item) {\n    try {\n      const token = localStorage.getItem(\"jwtToken\");\n      const response = await fetch(\"http://localhost:5002/api/watchlists/remove\", {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          itemID: item._id\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        console.error(\"Remove from Watchlist Fetch failed:\", errorData.message);\n        return;\n      }\n      const json = await response.json();\n      console.log(json.message);\n    } catch (error) {\n      console.error(\"Request failed:\", error);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"CartTile-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CartTile-data\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        onClick: handleDetails,\n        style: {\n          width: \"5rem\",\n          height: \"5rem\",\n          cursor: \"pointer\"\n        },\n        src: imageUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: item.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"$\", item.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: !(item.delivery === \"in-person\") ? /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handlePurchase,\n          variant: \"contianed\",\n          style: {\n            backgroundColor: \"#685BE0\",\n            color: \"white\"\n          },\n          children: \"Purchase\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(ContactSeller, {\n            receiverID: item.seller._id,\n            senderName: user.username,\n            receiverName: item.seller.username,\n            open: open,\n            close: () => setOpen(false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setOpen(true),\n            style: {\n              backgroundColor: \"#685BE0\",\n              margin: \"5%\"\n            },\n            variant: \"contained\",\n            children: \"Contact Seller\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Re-login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CartTile-remove\",\n      style: {\n        display: \"flex\",\n        justifyContent: \"right\"\n      },\n      children: /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handleRemove,\n        children: /*#__PURE__*/_jsxDEV(CancelIcon, {\n          style: {\n            color: \"685BE0\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n}\n_s(CartTile, \"fdrsfpDXmgQlY0qZknGrNYphZSk=\", false, function () {\n  return [useNavigate];\n});\n_c = CartTile;\nexport default CartTile;\nvar _c;\n$RefreshReg$(_c, \"CartTile\");","map":{"version":3,"names":["bike","IconButton","CancelIcon","EditWatchlist","EditWatchBadge","Watchlist","useContext","useState","Button","useNavigate","ContactSeller","jsxDEV","_jsxDEV","Fragment","_Fragment","CartTile","user","data","item","_s","navigate","set","badge","watch","open","setOpen","imageUrl","handleRemove","i","length","_id","splice","requestRemoveItemWatchlist","handleDetails","state","handlePurchase","console","log","title","price","token","localStorage","getItem","response","fetch","method","headers","body","JSON","stringify","itemID","ok","errorData","json","error","message","className","children","onClick","style","width","height","cursor","src","fileName","_jsxFileName","lineNumber","columnNumber","delivery","variant","backgroundColor","color","receiverID","seller","senderName","username","receiverName","close","margin","display","justifyContent","_c","$RefreshReg$"],"sources":["/Users/uthithmenonravitharan/Documents/GitHub/Grabbit/react-grabbit/src/Components/CartTile.js"],"sourcesContent":["import \"../Styles/CartTile.css\"\nimport bike from \"../Images/bike.jpg\";\nimport IconButton from '@mui/material/IconButton';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport { EditWatchlist, EditWatchBadge, Watchlist } from \"../App\";\nimport { useContext, useState } from \"react\";\nimport { Button } from \"@mui/material\";\nimport {useNavigate } from \"react-router-dom\";\nimport ContactSeller from \"../Modals/ContactSeller\";\nfunction CartTile({user,data: item}){\n    const navigate = useNavigate();\n    const set = useContext(EditWatchlist)\n    const badge = useContext(EditWatchBadge);\n    const watch = useContext(Watchlist);\n\n    const [open,setOpen] = useState(false)\n\n    const imageUrl = item.imageUrl \n    ? `http://localhost:5003${item.imageUrl}` \n    : \"https://via.placeholder.com/150\";\n\n    function handleRemove(){\n        for(let i =0; i < watch.length; i++){\n            if(item._id === watch[i]._id){\n              watch.splice(i,1);\n              break;\n            }\n        }\n        requestRemoveItemWatchlist(item)\n        set(watch);\n        badge(watch.length);\n\n        //This fixes an issue with the page not updating specifically for a single item when pulling from the DB\n        //DO NOT CHANGE\n        if(watch.length <1){\n            navigate(\"/cart\")\n        }\n    }\n\n    function handleDetails(){\n        navigate(\"/details\",{state: {data:item}})\n    }\n\n    function handlePurchase(){\n        console.log(\"Send to Stripe API\");\n        console.log(\"Item name:\", item.title);\n        console.log(\"Item cost:\", item.price);\n\n        \n    }\n\n    async function requestRemoveItemWatchlist(item){\n        try{\n            const token = localStorage.getItem(\"jwtToken\");\n            const response = await fetch(\"http://localhost:5002/api/watchlists/remove\",{\n                method: \"DELETE\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  'Authorization': `Bearer ${token}`\n                },\n                body:JSON.stringify({\n                    itemID:item._id\n                }),\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n                console.error(\"Remove from Watchlist Fetch failed:\", errorData.message);\n                return;\n            }\n        \n            const json = await response.json();\n            console.log(json.message)\n        }\n        catch(error){\n            console.error(\"Request failed:\", error);\n        }\n    }\n\n\n    return(\n        <div className=\"CartTile-content\">\n            <div className=\"CartTile-data\">\n                <img onClick={handleDetails} style={{width:\"5rem\",height:\"5rem\",cursor:\"pointer\"}} src={imageUrl}></img>\n                <p>{item.title}</p>\n                <p>${item.price}</p>\n            </div>\n            <div>\n                {\n                    user?\n                    <>\n                    {\n                        !(item.delivery === \"in-person\")?\n                        <Button onClick={handlePurchase} variant=\"contianed\" style={{backgroundColor:\"#685BE0\", color:\"white\"}}>Purchase</Button>\n                        :\n                        <>\n                        <ContactSeller receiverID={item.seller._id} senderName={user.username} receiverName={item.seller.username}  open={open} close={() => setOpen(false)}/>\n                        <Button onClick={() => setOpen(true)} style={{backgroundColor:\"#685BE0\", margin:\"5%\"}} variant=\"contained\">Contact Seller</Button>\n                        </>\n                    }\n                    </>\n                    :\n                    <p>Re-login</p>\n                }\n            </div>\n            <div className=\"CartTile-remove\" style={{display:\"flex\", justifyContent:\"right\"}}>\n                <IconButton onClick={handleRemove}>\n                    <CancelIcon style={{color:\"685BE0\"}}/>\n                </IconButton>\n            </div>\n        </div>\n    );\n}\n\nexport default CartTile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}